<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.9.1 (457703)"/><meta name="altitude" content="99.20114898681641"/><meta name="author" content="Olaf Kotur"/><meta name="created" content="2019-04-10 09:44:38 +0000"/><meta name="latitude" content="52.63982198782332"/><meta name="longitude" content="-1.192695329928354"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-04-10 12:19:56 +0000"/><title>03: Semaphores</title></head><body><div><b>Semaphore: </b>Essentially a variable that processes can access and modify.</div><ul><li><div>Depending on value the process will find that the resource is available or must wait</div></li><li><div>The process will wait some time before trying to access resource again</div></li><li><div>Act similar to counters, support two operations:</div></li><ul><li><div><b>wait( ): </b>Decrement an internal counter by 1, if value is now negative, block the calling process. Also known as <b>P( )</b> or <b>down( )</b> or <b>acquire( )</b>.</div></li><li><div><b>signal( ): </b>Increment counter by 1, if pre-increment value was negative, transfer one blocker process to run queue. Also known as <b>V( )</b> or <b>up( )</b> or <b>release ( )</b>.</div></li></ul></ul><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>public class Bank_account { </div><div><span>    </span>private int bal = 0;</div><div><span>    </span>private Semaphore mutex = 1;</div><div><span>    </span>public void Bank_account(int start_balance) { </div><div><span>    <span>    </span></span>bal = start_balance;</div><div><span>    </span>}</div><div><span>    </span></div><div><span>    </span>public void update(int amount) {</div><div><span>   <span>    </span> </span>mutex.wait();</div><div><span><span>    </span>    </span>bal = bal + amount; </div><div><span>    <span>    </span></span>mutex.signal();</div><div><span>    </span>} </div><div>}</div></div><div><br/></div><div><br/></div><div><b>Blocking implementation</b></div><ul><li><div><b>sleep(int i): </b>Block the calling process by placing it on a queue.</div></li><li><div><b>wakeup(int i): </b>Put all processes that are sleeping onto the run queue, do nothing if no processing exist (waste).</div></li><li><div>Same concept used in Java but instead it is done via <b>Object.wait( )</b> and <b>Object.notify( )</b></div></li><li><div><b>NotifyAll( ) </b>Also exist but there is no point waking them all up if only 1 thread can do something anyway, referred to as <b>spurious wakeup</b></div></li></ul><div><b><br/></b></div><div><b><br/></b></div><div><b>User Defined Box Sizing: </b>One process reads number from keyboard and places inside an object of class BoxDimension then separate process extracts number from BoxDimension object, and draws box of corresponding size.</div><div><br/></div><div><b>Producer Consumer Problem</b></div><div><b><img src="03%3A%20Semaphores.html.resources/36ADDA0B-6F44-42FE-90C5-EB512F36E451.png" height="831" width="1365"/></b></div><div><br/></div></body></html>